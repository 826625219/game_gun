{"version":3,"sources":["..\\..\\..\\..\\assets\\script/assets\\script\\Magazine2.ts"],"names":[],"mappings":";;;;;AAAA,oBAAoB;AACpB,wEAAwE;AACxE,mBAAmB;AACnB,kFAAkF;AAClF,8BAA8B;AAC9B,kFAAkF;;;;;;;;;;;;;;;;;;;;;AAK5E,IAAA,kBAAqC,EAAnC,oBAAO,EAAE,sBAA0B,CAAC;AAE5C,KAAK;AAGL;IAAsC,4BAAY;IADlD;QAAA,qEAkEC;QA/DG,OAAO;QAEP,gBAAU,GAAmB,IAAI,CAAC;QAElC,cAAQ,GAAW,EAAE,CAAC,CAAC,OAAO;QAC9B,WAAK,GAAW,EAAE,CAAC,CAAC,SAAS;;IA0DjC,CAAC;IAxDG,yBAAM,GAAN;QAEI,UAAU;QACV,IAAI,KAAK,GAAW,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK,GAAG,EAAE,CAAC,GAAG,IAAI,CAAC,QAAQ,CAAC;QAE3D,UAAU;QACV,IAAI,CAAC,GAAW,CAAC,CAAC;QAClB,KAAK,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,QAAQ,EAAE,CAAC,EAAE,EAAC,MAAM;SACzC;YACI,IAAI,UAAU,GAAY,IAAI,EAAE,CAAC,IAAI,EAAE,CAAC;YACxC,IAAI,YAAY,GAAc,UAAU,CAAC,YAAY,CAAC,EAAE,CAAC,MAAM,CAAC,CAAC;YACjE,YAAY,CAAC,WAAW,GAAG,IAAI,CAAC,UAAU,CAAC;YAC3C,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,UAAU,CAAC,CAAC;YAE/B,UAAU,CAAC,CAAC,GAAG,KAAK,GAAG,CAAC,GAAG,EAAE,CAAC,CAAC,gBAAgB;YAC/C,UAAU,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC;SACrB;IACL,CAAC;IAGD,wBAAK,GAAL;IAEA,CAAC;IAED,yBAAM,GAAN,UAAO,EAAE;IAET,CAAC;IAED,KAAK;IACL,wBAAK,GAAL;QACI,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,QAAQ,CAAC;QAC3B,IAAI,CAAC,OAAO,EAAE,CAAC;IACnB,CAAC;IAED,SAAS;IACT,0BAAO,GAAP,UAAQ,CAAS;QACb,IAAI,CAAC,KAAK,IAAI,CAAC,CAAC;QAChB,IAAI,IAAI,CAAC,KAAK,GAAG,CAAC;YACd,IAAI,CAAC,KAAK,GAAG,CAAC,CAAC;QAEnB,IAAI,CAAC,OAAO,EAAE,CAAC;IACnB,CAAC;IAED,UAAU;IACV,iBAAiB;IACjB,0BAAO,GAAP;QACI,IAAI,KAAK,GAAc,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAA,QAAQ;QAElD,IAAI,CAAC,GAAW,CAAC,CAAC;QAClB,KAAK,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,KAAK,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;YAC/B,IAAI,IAAI,CAAC,KAAK,GAAG,CAAC;gBACd,KAAK,CAAC,CAAC,CAAC,CAAC,MAAM,GAAG,IAAI,CAAC;;gBAEvB,KAAK,CAAC,CAAC,CAAC,CAAC,MAAM,GAAG,KAAK,CAAC;SAC/B;IACL,CAAC;IA5DD;QADC,QAAQ,CAAC,EAAE,CAAC,WAAW,CAAC;gDACS;IAJjB,QAAQ;QAD5B,OAAO;OACa,QAAQ,CAiE5B;IAAD,eAAC;CAjED,AAiEC,CAjEqC,EAAE,CAAC,SAAS,GAiEjD;kBAjEoB,QAAQ","file":"","sourceRoot":"..\\..\\..\\..\\assets\\script","sourcesContent":["// Learn TypeScript:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/typescript.html\r\n// Learn Attribute:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/life-cycle-callbacks.html\r\n\r\nimport Common from \"./Common\";\r\n\r\n\r\nconst { ccclass, property } = cc._decorator;\r\n\r\n// 弹匣\r\n\r\n@ccclass\r\nexport default class Magazine extends cc.Component {\r\n\r\n    // 子弹图片\r\n    @property(cc.SpriteFrame)\r\n    bulletIcon: cc.SpriteFrame = null;\r\n\r\n    capacity: number = 15; // 最大弹药\r\n    count: number = 15; // 现有弹药数量\r\n\r\n    onLoad() {\r\n\r\n        // 子弹的水平间距\r\n        let space: number = (this.node.width - 60) / this.capacity;\r\n\r\n        // 创建10个子弹\r\n        let i: number = 0;\r\n        for (i = 0; i < this.capacity; i++)//循环创建\r\n        {\r\n            let bulletNode: cc.Node = new cc.Node();\r\n            let bulletSprite: cc.Sprite = bulletNode.addComponent(cc.Sprite);\r\n            bulletSprite.spriteFrame = this.bulletIcon;\r\n            this.node.addChild(bulletNode);\r\n\r\n            bulletNode.x = space * i + 38; // 向右偏移一些,直接局部坐标\r\n            bulletNode.y = -3;\r\n        }\r\n    }\r\n\r\n\r\n    start() {\r\n\r\n    }\r\n\r\n    update(dt) {\r\n\r\n    }\r\n\r\n    // 重置\r\n    reset() {\r\n        this.count = this.capacity;\r\n        this.display();\r\n    }\r\n\r\n    // 消耗n个子弹\r\n    consume(n: number) {\r\n        this.count -= n;\r\n        if (this.count < 0)\r\n            this.count = 0;\r\n\r\n        this.display();\r\n    }\r\n\r\n    // 显示剩余的子弹\r\n    // active的表示剩下的子弹\r\n    display() {\r\n        let nodes: cc.Node[] = this.node.children;//有几个子节点\r\n\r\n        let i: number = 0;\r\n        for (i = 0; i < nodes.length; i++) {\r\n            if (this.count > i)\r\n                nodes[i].active = true;\r\n            else\r\n                nodes[i].active = false;\r\n        }\r\n    }\r\n}\r\n"]}